<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/common :: head('Leaderboard')}">
    <title>Leaderboard</title>
</head>
<body>
<div th:replace="~{fragments/common :: blobs}"></div>

<style>
    /* –°—Ç–∏–ª–∏, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤ */
    .container { max-width: 800px; margin: 0 auto; padding-top: 40px; }
    .leader-card {
        background: rgba(var(--card-bg-rgb), 0.75);
        backdrop-filter: blur(12px);
        border: var(--card-border);
        border-radius: 24px;
        padding: 30px;
        box-shadow: var(--card-shadow);
    }
    /* Tabs */
    .nav-pills { margin-bottom: 2rem; gap: 0.5rem; justify-content: center; }
    .nav-pills .nav-link { border-radius: 50px; color: var(--text-muted); border: 1px solid var(--btn-border); font-weight: 600; padding: 0.5rem 1.5rem; }
    .nav-pills .nav-link.active { background: var(--accent-gradient); color: white; border-color: transparent; }
    /* Table */
    table { width: 100%; border-collapse: separate; border-spacing: 0; }
    th { text-align: left; color: var(--text-muted); font-size: 0.8rem; text-transform: uppercase; padding: 15px; border-bottom: 1px solid var(--btn-border); }
    td { padding: 20px 15px; vertical-align: middle; border-bottom: 1px solid var(--btn-border); }
    .rank-gold { color: #F59E0B; } .rank-silver { color: #64748B; } .rank-bronze { color: #B45309; }
    .score-badge { background: var(--accent-gradient); color: white; padding: 6px 12px; border-radius: 8px; font-weight: 700; font-family: 'JetBrains Mono'; }
</style>

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4" style="position: relative; z-index: 2;">
        <a href="/" class="btn-modern">‚Üê Menu</a>
        <h2 class="fw-bold m-0" style="background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Hall of Fame</h2>
        <button class="btn-modern" onclick="toggleTheme()" id="themeBtn" style="width: 45px; height: 45px; padding: 0; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">üåô</button>
    </div>

    <div class="leader-card">
        <ul class="nav nav-pills" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation" th:each="cat : ${categories}">
                <button class="nav-link" th:classappend="${cat == 'ALL'} ? 'active' : ''"
                        th:id="'pills-' + ${cat} + '-tab'" data-bs-toggle="pill"
                        th:data-bs-target="'#pills-' + ${cat}" type="button" role="tab"
                        th:text="${cat == 'ALL' ? 'üî• Hardcore' : 'Section ' + cat}">
                </button>
            </li>
        </ul>

        <div class="tab-content" id="pills-tabContent">
            <div th:each="cat : ${categories}" class="tab-pane fade"
                 th:classappend="${cat == 'ALL'} ? 'show active' : ''"
                 th:id="'pills-' + ${cat}" role="tabpanel">

                <div th:if="${leaderboards.get(cat) == null || leaderboards.get(cat).isEmpty()}" class="text-center py-5">
                    <div style="font-size: 3rem; opacity: 0.5;">üöÄ</div>
                    <h4 class="mt-3">No Records Yet</h4>
                    <p style="color: var(--text-muted)">Be the first!</p>
                </div>

                <table th:unless="${leaderboards.get(cat) == null || leaderboards.get(cat).isEmpty()}">
                    <thead><tr><th width="15%">Rank</th><th width="45%">Player</th><th width="20%">Score</th><th width="20%">Time</th></tr></thead>
                    <tbody>
                    <tr th:each="score, stat : ${leaderboards.get(cat)}">
                        <td>
                            <span th:if="${stat.count == 1}" class="fw-bold rank-gold">ü•á 1</span>
                            <span th:if="${stat.count == 2}" class="fw-bold rank-silver">ü•à 2</span>
                            <span th:if="${stat.count == 3}" class="fw-bold rank-bronze">ü•â 3</span>
                            <span th:if="${stat.count > 3}" style="color: var(--text-muted); padding-left: 24px;" th:text="${stat.count}"></span>
                        </td>
                        <td class="fw-bold" th:text="${score.name}">User</td>
                        <td><span class="score-badge" th:text="${score.score}">0</span></td>
                        <td style="font-family: 'JetBrains Mono'; color: var(--text-muted);" th:text="${score.timeFormatted}">00:00</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script th:replace="~{fragments/common :: scripts}"></script>
</body>
</html>