<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/common :: head('Leaderboard')}">
    <title>Leaderboard</title>
</head>
<body>

<link rel="stylesheet" th:href="@{/css/leaderboard.css}">

<div th:replace="~{fragments/common :: blobs}"></div>

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4" style="position: relative; z-index: 2;">
        <a href="/" class="btn-modern">â† Menu</a>
        <h2 class="fw-bold m-0" style="background: var(--accent-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Hall of Fame</h2>
        <button class="btn-modern theme-toggle-header" onclick="toggleTheme()" id="themeBtn">ğŸŒ™</button>
    </div>

    <div class="leader-card">
        <ul class="nav nav-pills" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation" th:each="cat : ${categories}">
                <button class="nav-link" th:classappend="${cat == 'ALL'} ? 'active' : ''"
                        th:id="'pills-' + ${cat} + '-tab'" data-bs-toggle="pill"
                        th:data-bs-target="'#pills-' + ${cat}" type="button" role="tab"
                        th:text="${cat == 'ALL' ? 'ğŸ”¥ Hardcore' : 'Section ' + cat}">
                </button>
            </li>
        </ul>

        <div class="tab-content" id="pills-tabContent">
            <div th:each="cat : ${categories}" class="tab-pane fade"
                 th:classappend="${cat == 'ALL'} ? 'show active' : ''"
                 th:id="'pills-' + ${cat}" role="tabpanel">

                <div th:if="${leaderboards.get(cat) == null || leaderboards.get(cat).isEmpty()}" class="text-center py-5">
                    <div style="font-size: 3rem; opacity: 0.5;">ğŸš€</div>
                    <h4 class="mt-3">No Records Yet</h4>
                    <p style="color: var(--text-muted)">Be the first!</p>
                </div>

                <table th:unless="${leaderboards.get(cat) == null || leaderboards.get(cat).isEmpty()}">
                    <thead><tr><th width="15%">Rank</th><th width="45%">Player</th><th width="20%">Score</th><th width="20%">Time</th></tr></thead>
                    <tbody>
                    <tr th:each="score, stat : ${leaderboards.get(cat)}">
                        <td>
                            <span th:if="${stat.count == 1}" class="fw-bold rank-gold">ğŸ¥‡ 1</span>
                            <span th:if="${stat.count == 2}" class="fw-bold rank-silver">ğŸ¥ˆ 2</span>
                            <span th:if="${stat.count == 3}" class="fw-bold rank-bronze">ğŸ¥‰ 3</span>
                            <span th:if="${stat.count > 3}" style="color: var(--text-muted); padding-left: 24px;" th:text="${stat.count}"></span>
                        </td>
                        <td class="fw-bold" th:text="${score.name}">User</td>
                        <td><span class="score-badge" th:text="${score.score}">0</span></td>
                        <td style="font-family: 'JetBrains Mono'; color: var(--text-muted);" th:text="${score.timeFormatted}">00:00</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script th:replace="~{fragments/common :: scripts}"></script>
</body>
</html>